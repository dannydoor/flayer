<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/style.css">
    <script type="text/javascript" src="./js/jwplayer.js"></script>
    <script>
      jwplayer.key = 'Bch7bd0cZt0adCRYHGveauTP1LaJlq1EMyrU/IxgfrGDc3gTqZxyPFEKKMI';
    </script>
    <script type="text/javascript" src="./js/slip.js"></script>
    <title>flayer</title>
    <template id="shadowStyle">
      <style>
        * {
          box-sizing: border-box;
          margin: 0;
        }

        a {
          color: inherit;
          text-decoration: none;
        }

        button,
        input,
        textarea {
          font-family: 'NotoSans', sans-serif;
          border: none;
          outline: none;
          box-shadow: none;
        }

        button:focus,
        button:active,
        input:focus,
        input:active,
        textarea:focus,
        textarea:active {
          outline: none;
          box-shadow: none;
        }

        ul,
        ol,
        li {
          list-style-type: none;
          padding-left: 0;
          margin-left: 0;
        }
        
        :host {
          display: flex;
          position: relative;
          align-items: center;
          width: 320px;
          height: 56px;
          margin: 0;
          padding: 12px 16px 12px 4px;
          background-color: var(--color-base-blurred, rgba(255, 255, 255, 0.7));
          backdrop-filter: blur(32px);
          cursor: pointer;
        }

        :host::after {
          content: '';
          display: block;
          position: absolute;
          width: 272px;
          height: 1px;
          background-color: var(--color-base-1, #f5f5f5);
          right: 16px;
          bottom: 0;
        }

        :host(:hover) {
          background-color: var(--color-base-1-blurred, rgba(245, 245, 245, 0.7));
        }

        :host(:active) {
          background-color: var(--color-base-2-blurred, rgba(235, 235, 235, 0.7));
        }
        
        :host .front-indicator {
          display: flex;
          flex-flow: column;
          justify-content: center;
          align-items: center;
          flex-shrink: 0;
          font: var(--font-small-bold, 700 12px/1.333333333 'NotoSans');
          color: var(--color-ceil-2, #A9A9A9);
          content: attr(data-index);
          width: 24px;
          height: 24px;
        }
        
        :host(.library:not(.playing):hover) .front-indicator,
        :host(.playlist:not(.playing):hover) .front-indicator,
        :host(.queue:not(.playing):hover) .front-indicator{
          background: url("./assets/img/16px/Play.svg") no-repeat center/16px;
          color: transparent;
        }
        
        :host(.playing) .front-indicator {
          background: url("./assets/img/24px/Note.svg") no-repeat center/24px;
          color: transparent;
        }
        
        :host(.library.playing) .song-title,
        :host(.library.playing) .song-artist,
        :host(.playlist.playing) .song-title,
        :host(.playlist.playing) .song-artist{
          color: var(--color-primary, #595ae2);
        }
        
        :host .song-info {
          display: block;
          position: relative;
          width: 208px;
          height: 32px;
          margin-left: 4px;
        }
        
        :host .song-title {
          display: block;
          width: 208px;
          height: 17px;
          font: var(--font-medium-bold, 700 14px/1.142857142857143 'NotoSans');
          letter-spacing: -0.01em;
          color: var(--color-ceil, #262626);
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          margin-bottom: 3px;
        }
        
        :host .song-artist {
          display: block;
          width: 208px;
          height: 13px;
          font: var(--font-artist, 400 12px/1 'NotoSans');
          letter-spacing: -0.01em;
          color: var(--color-ceil-1, #707070);
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }
        
        :host .button-field {
          display: flex;
          flex-direction: row-reverse;
          width: 56px;
          height: 24px;
          align-items: center;
          margin-left: 8px;
        }
        
        :host .button-field button:not(.music-select) {
          visibility: hidden;
          display: block;
          width: 24px;
          height: 24px;
          border-radius: 50%;
        }
        
        :host(:hover) .button-field button {
          visibility: visible;
        }
        
        :host .music-meatballs {
          background: url("./assets/img/24px/Meatballs-g.svg") no-repeat center/24px;
          margin-left: 8px;
        }
        
        :host .music-meatballs:hover  {
          visibility: visible;
          background: url("./assets/img/24px/Meatballs-gd.svg") no-repeat center/24px;
          background-color: var(--color-base-2, #F5F5F5);
          background-blend-mode: multiply;
        }
        
        :host .music-meatballs:active {
          visibility: visible;
          background-color: var(--color-base-3, #EBEBEB);
        }
        
        :host .music-add {
          background: url("./assets/img/24px/Add-gd.svg") no-repeat center/24px;
        }
        
        :host .music-add:hover {
          visibility: visible;
          background: url("./assets/img/24px/Add-p.svg") no-repeat center/24px;
          background-color: var(--color-base-2, #F5F5F5);
          background-blend-mode: multiply;
        }
        
        :host .music-add:active {
          visibility: visible;
          background-color: var(--color-base-3, #EBEBEB);
        }
        
        :host .music-drag {
          display: block;
          width: 24px;
          height: 24px;
          background: url("./assets/img/24px/Drag.svg") no-repeat center/24px;
          margin-left: 8px;
        }
        
        :host .music-delete {
          background: url("./assets/img/24px/Delete-gd.svg") no-repeat center/24px;
        }
        
        :host .music-delete:hover {
          visibility: visible;
          background: url("./assets/img/24px/Delete-s.svg") no-repeat center/24px;
        }
        
        :host .music-delete:active {
          visibility: visible;
          background: url("./assets/img/24px/Delete-sd.svg") no-repeat center/24px;
        }
        
        :host(.selected) * {
          color: var(--color-primary, #595ae2);
        }
        
        :host .music-select {
          display: block;
          width: 24px;
          height: 24px;
          background: url("./assets/img/24px/Add-g.svg") no-repeat center/24px;
          margin-left: 8px;
        }
        
        :host(.selected) .music-select {
          display: block;
          width: 24px;
          height: 24px;
          background: url("./assets/img/24px/Done-p.svg") no-repeat center/24px;
        }
        
        [overflown]::before {
          content: attr(data-tooltip);
          position: absolute;
          left: 0;
          bottom: calc(100% + 4px);
          display: block;
          padding: 4px 8px;
          border-radius: 4px;
          font: var(--font-tiny-bold, 700 10px/1.2 'NotoSans');
          color: var(--color-ceil-2, #A9A9A9);
          background: var(--color-base, #fff);
          box-shadow: 0 2px 6px rgba(0,0,0,0.25);
          transition: opacity 150ms ease-in-out;
          transition-delay: 0.3s;
          opacity: 0;
          z-index: 99999;
        }
        
        [overflown]:hover::before {
          opacity: 1;
        }
      </style>
    </template>
    <script type="text/javascript" src="./js/music-object.js"></script>
  </head>
  <body>
    <!-- <div id="test-div"></div> -->
    <div class="container">
      <div id='tab' class="invisible"></div>
      <div id="video"></div>
      <div class="control-panel">
        <button id="open-queue" data-tooltip="재생 중인 목록 보기"></button>
        <div class="control-container">
          <button id="repeat-button"></button>
          <div class="control-buttons">
            <button id="prev-button"></button>
            <button id="play-or-pause" class="play"></button>
            <button id="next-button"></button>
          </div>
          <button id="shuffle-button"></button>
        </div>
      </div>
      <div class="play-volume-bars">
        <input type="range" id="play-bar" value="0">
        <div class="timers">
          <span id="current-time">00:00</span>
          <span id="remaining-time">- 05:02</span>
        </div>
        <div class="volume-bar-container">
          <div id="mute-button"></div>
          <input type="range" id="volume-bar" value="0">
          <div id="volume-button"></div>
        </div>
      </div>
      <div class="song-info-section">
        <div class="song-info-block">
          <div class="song-info">
            <strong id="curr-song-title">DM</strong>
            <span id="curr-song-artist">fromis_9</span>
          </div>
          <button id="open-curr-playlist"></button>
          <button id="like-this-button"></button>
          <button id="meatball-button"></button>
        </div>
        <button id="fullscreen-button" data-tooltip="전체화면"></button>
      </div>
    </div>
    </ul>
    <script>
      document.querySelectorAll('input[type=range]').forEach(item => {
        item.oninput = function(e) {
        let value = e.target.value;
        e.target.style.background = 'linear-gradient(to right, var(--color-primary, #595ae2) 0%, var(--color-primary, #595ae2) '+this.value +'%, var(--color-base-3, #d9d9d9) ' + this.value + '%, var(--color-base-3, #d9d9d9) 100%)'
      };
      })
      /*
      let testObjArray = [
        {
          id: 'musicID',
          title: 'DM',
          artist: 'fromis_9',
          src: '',
          startTime: 0,
          endTime: 206,
          duration: 206,
          isLiked: true,
          isPlaying: true,
          isNew: false,
          playedTime: 1,
        },
        {
          id: 'musicID2',
          title: 'Feel Good (SECRET CODE)',
          artist: 'fromis_9',
          src: '',
          startTime: 0,
          endTime: 223,
          duration: 223,
          isLiked: true,
          isPlaying: false,
          isNew: false,
          playedTime: 1,
        },
        {
          id: 'musicID3',
          title: '우리의 길 (feat. 김관호, 김다영, 김명식, 김상우, 김형미, 김훈희, 민나래, 이찬미, 임성규, 조서연, 조아라, 조찬미 & 한설희)',
          artist: '염평안',
          src: '',
          startTime: 0,
          endTime: 306,
          duration: 306,
          isLiked: true,
          isPlaying: false,
          isNew: false,
          playedTime: 1,
        },
        {
          id: 'musicID4',
          title: '너를 따라 너에게',
          artist: 'fromis_9',
          src: '',
          startTime: 0,
          endTime: 213,
          duration: 213,
          isLiked: true,
          isPlaying: false,
          isNew: false,
          playedTime: 1,
        },
        {
          id: 'musicID5',
          title: "L'Amour, Les Baguettes, Paris",
          artist: 'Stella Jang',
          src: '',
          startTime: 0,
          endTime: 167,
          duration: 167,
          isLiked: true,
          isPlaying: false,
          isNew: false,
          playedTime: 1,
        },
      ];
      
      let itemType = ['library', 'playlist', 'queue', 'editing', 'selectable'];
      
      let context = 'fromis_9';
      
      for (let i=0; i<5; i++) {
        let obj = testObjArray[i];
        let type = itemType[i];
        
        let item = document.createElement('div', {is : `${type}-item`});
        item.setup(obj, context, i+1);
        window['test-div'].append(item);
      }
      
      function setupSlip(list) {
        list.addEventListener('slip:beforereorder', function(e){
            if (!e.target.classList.contains('queue') && !e.target.classList.contains('editing')) {
                e.preventDefault();
            }
        }, false);
        
        list.addEventListener('slip:beforeswipe', e => {
          e.preventDefault();
        }, false);
        
        list.addEventListener('slip:beforewait', e => {
          if (e.target.classList.contains('music-drag')) {
            e.preventDefault();
          }
        }, false);
        
        list.addEventListener('slip:reorder', e => {
          e.target.parentNode.insertBefore(e.target, e.detail.insertBefore);
          return false;
        }, false);
        
        let options = {
          ignoredElements: ['.library', '.playlist', '.selectable'],
        };
        
        return new Slip(list, options);
      }
      
      let testDiv = window['test-div'];
      setupSlip(testDiv);
      */
    </script>
  </body>
</html>